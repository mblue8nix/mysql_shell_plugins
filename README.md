# mysql_shell_plugins
My MySQL shell plugins

This repo is a place holder for my mysql shell scripts.  

# mts_balance.py 

### Usage:

```
 JS > blue.getMtsBalance()
+---------+---------------+
| Workers | MTS Type      |
+---------+---------------+
|      15 | LOGICAL_CLOCK |
+---------+---------------+
+-----------+------------+-----------+
| THREAD_ID | Count      | PCT_USAGE |
+-----------+------------+-----------+
|   5215634 | 2124975176 |   56.1914 |
|   5215635 | 1021592444 |   27.0143 |
|   5215636 |  400856465 |   10.6000 |
|   5215637 |  140665892 |    3.7197 |
|   5215638 |   49065426 |    1.2975 |
|   5215639 |   18583071 |    0.4914 |
|   5215640 |    8150375 |    0.2155 |
|   5215641 |    4471271 |    0.1182 |
|   5215642 |    3004453 |    0.0794 |
|   5215643 |    2348426 |    0.0621 |
|   5215644 |    1993521 |    0.0527 |
|   5215645 |    1736385 |    0.0459 |
|   5215646 |    1573682 |    0.0416 |
|   5215647 |    1395090 |    0.0369 |
|   5215648 |    1260691 |    0.0333 |
```

## orient_yourself.py

### Usage:

```
MySQL ssl JS > blue.getOriented()

 Schema Sizes:
+-----------------------------+-----------+-------------+
| Database                    | Size (MB) | # of tables |
+-----------------------------+-----------+-------------+
| blue_test01                 |  36206.50 |          28 |
| instance_01                 |   3135.06 |           1 |
| instance_02                 |   3073.19 |           1 |
| instance_03                 |   3086.16 |           1 |
| instance_04                 |   3061.19 |           1 |
| instance_05                 |   3055.16 |           1 |
| red_test01                  |   2605.22 |          11 |
| black_test05                |   2554.17 |           1 |
| yellow_test08               |   2592.30 |           1 |
+-----------------------------+-----------+-------------+

 Multi Threaded Replication Information:
+---------+---------------+-------+----------------+
| Workers | MTS Type      | GTIDs | Rep Compressed |
+---------+---------------+-------+----------------+
|      3  | LOGICAL_CLOCK | ON    |              1 |
+---------+---------------+-------+----------------+

 Replication Status:
+--------------+-----------+------------+------------+
| channel_name | IO_thread | SQL_thread | lag_in_sec |
+--------------+-----------+------------+------------+
|              | ON        | ON         | 0          |
+--------------+-----------+------------+------------+

 Replicating From:
+-------------+------------------+----------------+
| Host        | Master_log_name  | Master_log_pos |
+-------------+------------------+----------------+
| 127.0.01    | mysql-bin.0021   |            372 |
+-------------+------------------+----------------+

 Replicas:
+--------------+
| Connected    |
+--------------+
| No Replicas! |
+--------------+

 MySQL Workload of the server: 50.89% reads and 49.11% writes
+-----------------------------+--------+--------+----------------------+-----------------------+
| object_schema               | reads  | writes | ratio to total reads | ratio to total writes |
+-----------------------------+--------+--------+----------------------+-----------------------+
| instance_03                 | 49.98% | 50.02% | 5.30%                | 5.50%                 |
| instance_01                 | 49.98% | 50.02% | 5.14%                | 5.33%                 |
| instance_04                 | 49.98% | 50.02% | 5.36%                | 5.56%                 |
| instance_02                 | 49.98% | 50.02% | 5.32%                | 5.52%                 |
| blue_test01                 | 64.11% | 35.89% | 8.15%                | 4.73%                 |
| instance_05                 | 49.98% | 50.02% | 5.33%                | 5.52%                 |
| red_test01                  | 49.98% | 50.02% | 3.30%                | 3.42%                 |
| yellow_test08               | 49.98% | 50.02% | 3.34%                | 3.47%                 |
| black_test05                | 49.98% | 50.02% | 3.38%                | 3.51%                 |
+-----------------------------+--------+--------+----------------------+-----------------------+

 Buffer PCT
+----------------+
| BufferPoolFull |
+----------------+
| 98.32%         |
+----------------+

 Connections:
+---------------------+
| Current Connections |
+---------------------+
|                  22 |
+---------------------+

 App Users:
+------------+-----------+
| App User   | host      |
+------------+-----------+
| blue_r     | 127.0.01  |
| blue_w     | 127.0.01 |
+------------+-----------+
 
 General Info:
+------------------+-----------+-----------------+---------+---------------+---------------+-----------------+-----------------+
| Hostname         | Read Only | Super Read Only | Max Con | Binlog Format | MySQL Version | Long Query Time | Char Set Server |
+------------------+-----------+-----------------+---------+---------------+---------------+-----------------+-----------------+
| bluetest01       |         1 |               1 |    2000 | ROW           | 8.0.23-14     |               0 | latin1          |
+------------------+-----------+-----------------+---------+---------------+---------------+-----------------+-----------------+

 Performance Affecting Variables:
+--------------------------+--------------+---------------------+------------+---------------------+------------------------------+--------------------+
| @@Innodb_io_capacity_max | Sync Binlogs | @@log_slave_updates | Trx Commit | Log File Size in MB | Innodb Log Buffer Size in MB | @@open_files_limit |
+--------------------------+--------------+---------------------+------------+---------------------+------------------------------+--------------------+
|                     5000 |            0 |                   1 |          2 |       2000.00000000 |                 164.00000000 |              75000 |
+--------------------------+--------------+---------------------+------------+---------------------+------------------------------+--------------------+
 MySQL ssl JS >
 
 ```
